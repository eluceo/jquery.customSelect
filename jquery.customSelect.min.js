/*!
 * jquery.customSelect() - v0.4.3
 * http://adam.co/lab/jquery/customselect/
 * 2013-07-23
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License
 */
!function(t){"use strict";t.fn.extend({customSelect:function(e){if("undefined"==typeof document.body.style.maxHeight)return this;var s={customClass:"customSelect",mapClass:!0,mapStyle:!0},e=t.extend(s,e),n=e.customClass,a=function(e,s){var n=e.find(":selected"),a=s.children(":first"),i=n.html()||"&nbsp;";a.html(i),n.attr("disabled")?s.addClass(o("DisabledOption")):s.removeClass(o("DisabledOption")),setTimeout(function(){s.removeClass(o("Open")),t(document).off("mouseup."+o("Open"))},60)},o=function(t){return n+t};return this.each(function(){var s=t(this),i=t("<span />").addClass(o("Inner")),r=t("<span />"),l=s.position();s.after(r.append(i)),r.addClass(n),e.mapClass&&r.addClass(s.attr("class")),e.mapStyle&&r.attr("style",s.attr("style")),s.addClass("hasCustomSelect").on("update",function(){a(s,r);var e=s.parents().add(s).filter(function(){return"none"===t(this).css("display")?!0:void 0});e.each(function(e,s){var n=t(s);n.data("origStyle",n.attr("style")),n.show()});var n=parseInt(s.outerWidth(),10)-(parseInt(r.outerWidth(),10)-parseInt(r.width(),10));r.css({display:"inline-block"});var d=r.outerHeight();s.attr("disabled")?r.addClass(o("Disabled")):r.removeClass(o("Disabled")),i.css({width:n,display:"inline-block"}),l=s.position();var u=r.outerWidth();e.each(function(e,s){var n=t(s),a=n.data("origStyle");a?n.attr("style",a):n.removeAttr("style"),n.removeData("origStyle")}),s.css({"-webkit-appearance":"menulist-button",width:u,position:"absolute",opacity:0,height:d,fontSize:r.css("font-size"),left:l.left,top:l.top})}).on("change",function(){r.addClass(o("Changed")),a(s,r)}).on("keyup",function(t){r.hasClass(o("Open"))?(13==t.which||27==t.which||9==t.which)&&a(s,r):(s.blur(),s.focus())}).on("mousedown",function(){r.removeClass(o("Changed"))}).on("mouseup",function(e){r.hasClass(o("Open"))||(t("."+o("Open")).not(r).length>0&&"undefined"!=typeof InstallTrigger?s.focus():(r.addClass(o("Open")),e.stopPropagation(),t(document).one("mouseup."+o("Open"),function(e){e.target!=s.get(0)&&t.inArray(e.target,s.find("*").get())<0?s.blur():a(s,r)})))}).focus(function(){r.removeClass(o("Changed")).addClass(o("Focus"))}).blur(function(){r.removeClass(o("Focus")+" "+o("Open"))}).hover(function(){r.addClass(o("Hover"))},function(){r.removeClass(o("Hover"))}).trigger("update")})}})}(jQuery);